{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet ItemDetailsPage = class ItemDetailsPage {\n  constructor(animatioCntrl, util, route, router) {\n    this.animatioCntrl = animatioCntrl;\n    this.util = util;\n    this.route = route;\n    this.router = router;\n    this.availableSizes = ['S', 'M', 'L', 'XL'];\n    this.loginUser = [];\n    this.isAddedtoCart = false;\n    this.dataLoaded = false; // Track if the data has been loaded\n  }\n  ionViewWillEnter() {\n    this.util.showLoading();\n    this.getLoginUser();\n    this.getpost();\n  }\n  register() {}\n  ngOnInit() {\n    this.activeVariation = 'size';\n    this.itemId = +this.route.snapshot.paramMap.get('id'); // Get the item ID from the route\n    // this.getpost();\n  }\n  getLoginUser() {\n    let user = JSON.parse(localStorage.getItem('login'));\n    if (user != null) {\n      this.loginUser = user;\n    }\n  }\n  getpost() {\n    const login = JSON.parse(localStorage.getItem('login'));\n    const logindata = login.token;\n    this.util.sendData('getShopData', {\n      post_id: this.itemId\n    }, logindata).subscribe({\n      next: res => {\n        if (res.status == 'success') {\n          this.itemDetails = res.data.find(i => i.Id == this.itemId);\n          console.log('specific post', this.itemDetails);\n          this.checkIfItemInCart();\n          // this.dataLoaded = true;  // Set dataLoaded to true when data is loaded\n        }\n      },\n      error: err => {\n        console.log('Error', err);\n      },\n      complete: () => {\n        this.dataLoaded = true; // Set dataLoaded to true when data is fully loaded\n        this.util.hideLoader(); // Hide the loader when data is loaded\n      }\n    });\n  }\n  checkIfItemInCart() {\n    const login = JSON.parse(localStorage.getItem('login'));\n    const logindata = login.token;\n    const data = {\n      post_id: this.itemId,\n      user_id: this.loginUser.id\n    };\n    this.util.sendData('checkItemInCart', data, logindata).subscribe({\n      next: res => {\n        // if (res.status == 'success') {\n        this.isAddedtoCart = res.data;\n        // }\n        // else{\n        //   this.isAddedtoCart = false;\n        // }\n      },\n      error: err => {\n        console.log('Error', err);\n      }\n    });\n  }\n  segmentChanged(e) {\n    this.activeVariation = e.detail.value;\n    if (this.activeVariation == 'color') {\n      this.animatioCntrl.create().addElement(document.querySelector('.sizes')).duration(500).iterations(1).fromTo('transform', 'translateX(0px)', 'translateX(100%)').fromTo('opacity', '1', '0.2').play();\n      this.animatioCntrl.create().addElement(document.querySelector('.colors')).duration(500).iterations(1).fromTo('transform', 'translateX(-100%)', 'translateX(0)').fromTo('opacity', '0.2', '1').play();\n    } else {\n      this.animatioCntrl.create().addElement(document.querySelector('.sizes')).duration(500).iterations(1).fromTo('transform', 'translateX(100%)', 'translateX(0)').fromTo('opacity', '0.2', '1').play();\n      this.animatioCntrl.create().addElement(document.querySelector('.colors')).duration(500).iterations(1).fromTo('transform', 'translateX(0px)', 'translateX(-100%)').fromTo('opacity', '1', '0.2').play();\n    }\n  }\n  changeSize(size) {\n    if (this.isSizeAvailable(size)) {\n      this.selectedSize = size;\n    }\n  }\n  changeColor(color) {\n    this.selectedColor = color;\n  }\n  isSizeAvailable(size) {\n    return this.itemDetails && this.itemDetails.size.includes(size);\n    // return this.itemDetails && this.itemDetails.size && this.itemDetails.size.includes(size);\n  }\n  addtocart() {\n    const login = JSON.parse(localStorage.getItem('login'));\n    const logindata = login.token;\n    if (this.selectedSize && this.selectedColor) {\n      const data = {\n        post_id: this.itemId,\n        size: this.selectedSize,\n        color: this.selectedColor\n      };\n      console.log('data', data);\n      this.util.sendData('addcartData', data, logindata).subscribe({\n        next: res => {\n          if (res.status == 'success') {\n            console.log('cartitem', res);\n            this.isAddedtoCart = true;\n          }\n          // else{\n          //   this.isAddedtoCart = false;\n          // }\n        },\n        error: err => {\n          console.log('Error', err);\n        }\n      });\n    } else {\n      this.util.presentToast('Please select both size and color');\n    }\n  }\n  goToCart() {\n    this.router.navigate(['/my-cart']); // Redirect to cart page\n  }\n};\nItemDetailsPage = __decorate([Component({\n  selector: 'app-item-details',\n  templateUrl: './item-details.page.html',\n  styleUrls: ['./item-details.page.scss']\n})], ItemDetailsPage);\nexport { ItemDetailsPage };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../util.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction AddressModalComponent_ion_card_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\", 5);\n    i0.ɵɵlistener(\"click\", function AddressModalComponent_ion_card_10_Template_ion_card_click_0_listener() {\n      const address_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.selectAddress(address_r2));\n    });\n    i0.ɵɵelementStart(1, \"ion-card-content\");\n    i0.ɵɵelement(2, \"ion-checkbox\", 6);\n    i0.ɵɵelementStart(3, \"div\", 7)(4, \"h2\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h2\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ion-icon\", 8);\n    i0.ɵɵlistener(\"click\", function AddressModalComponent_ion_card_10_Template_ion_icon_click_8_listener() {\n      const address_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.deleteAlert(address_r2));\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const address_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"checked\", (ctx_r2.selectedAddress == null ? null : ctx_r2.selectedAddress.id) == address_r2.id);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(address_r2.address);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Location:\", address_r2.location, \"\");\n  }\n}\nexport let AddressModalComponent = /*#__PURE__*/(() => {\n  class AddressModalComponent {\n    constructor(modalController, util, router) {\n      this.modalController = modalController;\n      this.util = util;\n      this.router = router;\n      this.addressList = [];\n      this.selectedAddress = null;\n      this.loginUser = [];\n    }\n    ionViewWillEnter() {\n      this.getLoginUser();\n    }\n    selectAddress(address) {\n      this.selectedAddress = address;\n    }\n    confirmSelection() {\n      this.modalController.dismiss({\n        selectedAddress: this.selectedAddress\n      });\n    }\n    closeModal() {\n      this.modalController.dismiss();\n    }\n    getLoginUser() {\n      let user = JSON.parse(localStorage.getItem('login'));\n      if (user != null) {\n        this.loginUser = user;\n        console.log('login:', this.loginUser);\n      }\n    }\n    deleteAlert(addressid) {\n      this.util.presentAlert('Delete Address', 'Are you sure you want to delete the address?', [{\n        text: 'Cancel',\n        role: 'cancel'\n      }, {\n        text: 'Delete',\n        handler: () => {\n          this.delete(addressid);\n        }\n      }]);\n    }\n    delete(address) {\n      const data = {\n        user_id: this.loginUser.id,\n        id: address.id\n      };\n      console.log('data:', data);\n      const token = this.loginUser.token;\n      console.log('token', token);\n      this.util.sendData('delete_address', data, token).subscribe({\n        next: p => {\n          if (p.status == 'success') {\n            console.log('Deleted response:', p.message);\n            this.addressList = this.addressList.filter(item => item.id !== address.id); // Remove the deleted address and update the address list\n          } else {\n            console.error('Failed to delete address:', p.message);\n          }\n        },\n        error: err => {\n          console.error('Error occurred while deleting address:', err);\n        }\n      });\n    }\n    static #_ = (() => this.ɵfac = function AddressModalComponent_Factory(t) {\n      return new (t || AddressModalComponent)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.UtilService), i0.ɵɵdirectiveInject(i3.Router));\n    })();\n    static #_2 = (() => this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AddressModalComponent,\n      selectors: [[\"app-address-modal\"]],\n      inputs: {\n        addressList: \"addressList\",\n        selectedAddress: \"selectedAddress\"\n      },\n      decls: 15,\n      vars: 1,\n      consts: [[\"slot\", \"end\"], [3, \"click\"], [\"name\", \"add-circle-outline\", \"color\", \"danger\", \"routerLink\", \"/add-address\", 1, \"add-icon\"], [\"mode\", \"ios\", \"color\", \"primary\", \"class\", \"address-card\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"expand\", \"block\", 3, \"click\"], [\"mode\", \"ios\", \"color\", \"primary\", 1, \"address-card\", 3, \"click\"], [\"slot\", \"end\", 1, \"address-checkbox\", 3, \"checked\"], [1, \"address-details\"], [\"name\", \"trash-outline\", \"color\", \"danger\", 1, \"delete-icon\", 3, \"click\"]],\n      template: function AddressModalComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\");\n          i0.ɵɵtext(3, \"Select Address\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"ion-buttons\", 0)(5, \"ion-button\", 1);\n          i0.ɵɵlistener(\"click\", function AddressModalComponent_Template_ion_button_click_5_listener() {\n            return ctx.closeModal();\n          });\n          i0.ɵɵtext(6, \"Close\");\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(7, \"ion-content\");\n          i0.ɵɵelement(8, \"ion-icon\", 2);\n          i0.ɵɵelementStart(9, \"ion-list\");\n          i0.ɵɵtemplate(10, AddressModalComponent_ion_card_10_Template, 9, 3, \"ion-card\", 3);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(11, \"ion-footer\")(12, \"ion-toolbar\")(13, \"ion-button\", 4);\n          i0.ɵɵlistener(\"click\", function AddressModalComponent_Template_ion_button_click_13_listener() {\n            return ctx.confirmSelection();\n          });\n          i0.ɵɵtext(14, \"Confirm\");\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngForOf\", ctx.addressList);\n        }\n      },\n      dependencies: [i4.NgForOf, i1.IonButton, i1.IonButtons, i1.IonCard, i1.IonCardContent, i1.IonCheckbox, i1.IonContent, i1.IonFooter, i1.IonHeader, i1.IonIcon, i1.IonList, i1.IonTitle, i1.IonToolbar, i1.BooleanValueAccessor, i1.RouterLinkDelegate, i3.RouterLink],\n      styles: [\".add-icon[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin:10px}.address-card[_ngcontent-%COMP%]{position:relative;margin:10px 0}.address-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding-right:40px;position:relative}.address-card[_ngcontent-%COMP%]   .address-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin-bottom:5px}.address-card[_ngcontent-%COMP%]   .delete-icon[_ngcontent-%COMP%]{font-size:28px;position:absolute;bottom:10px;right:10px}.address-card[_ngcontent-%COMP%]   .address-checkbox[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;--size: 24px;--background: #fff}.address-card.selected[_ngcontent-%COMP%]{border:2px solid var(--ion-color-primary)}ion-footer[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}ion-footer[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--background: var(--ion-color-primary);--border-radius: 4px}\"]\n    }))();\n  }\n  return AddressModalComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}